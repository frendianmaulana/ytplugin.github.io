<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>Document</title>
</head>
<style>
    a{
        text-decoration: none;
        color: black;
    }
    body{
        position: relative;
        top: 100px;
    }
</style>
<body style="background: lime;">
    <div class="mt-4 container">
        <div class="row justify-content-center">
            <div class="col-lg-5">
                <div id="content">
                    <div class="mb-3 mx-auto card p-4" style="width: 34.3rem;">
                        <div id="video-preview"></div>
                        <div class="card-body">
                            <input class="form-control" type="text" id="input" placeholder="Masukkan URL ID Youtube" style="width: 250px;">
                            <!-- <button id="btn" class="btn btn-secondary">Download File</button> -->
                        </div>
                        <div class="mx-2">
                            <p>Jika Tidak Muncul Klik Di Bawah</p>
                            <div id="result"></div>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <button type="button" class="btn btn-primary" onclick="myscreenshot()">Screenshot</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    const video = document.getElementById("video-preview");
    const input = document.getElementById("input");

    input.addEventListener("keyup", function(event) {
        var id = this.value.replace(/.*\?v=|&.*$/g, '');
            if(id){
                video.innerHTML = '<iframe width="500" height="279" src="https://www.youtube.com/embed/'+id+'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>';
                //console.log("https://www.youtube.com/embed/"+id+"");
                document.getElementById("result").innerHTML = `<a href="https://youtu.be/${id}" target="_blank">https://youtu.be/${id}</a>`;
            }
            else{
                video.innerHTML = "Gagal Memuat Video";
            }
    })
</script>
<script>
    function myscreenshot(){
        const elemen = document.getElementById("content");
        const input = document.getElementById("input").value;

        if(input != ""){
            html2canvas(elemen).then(function(canvas){
                var gambar = canvas.toDataURL();
                var a = document.createElement("a");
                a.href = gambar;
                a.download = "download (" + input + ").png";
                a.click();
            });
        }
        else{
            alert("Wajib Diisi!");
        }
    }
</script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
</html>